set current_schema=dams;
start transaction;
select listagg( name ,$1 ) within GROUP ( ORDER BY name ) from dams_wf_task t ,jbpm4_participation p ,dams_user u1 ,( (WITH RECURSIVE migora_cte AS ( SELECT business_id ,$2 lv ,source_business_id FROM dams_wf_sub_process_rel r WHERE r.source_business_id = $3 UNION ALL SELECT r.business_id ,( mig_ora_cte_tab_alias.lv + $4 ) lv ,r.source_business_id FROM migora_cte mig_ora_cte_tab_alias INNER JOIN dams_wf_sub_process_rel r ON mig_ora_cte_tab_alias.business_id = r.source_business_id ) SELECT business_id ,lv ,source_business_id FROM migora_cte r ORDER BY lv )UNION ALL SELECT $5 ,$6 lv ,$7 ) sp WHERE t.business_id = sp.business_id AND t.task_state = $8 AND t.task_id = p.task_ AND p.userid_ = u1.ssic_id;
rollback;
set current_schema=dams;
SELECT task_id ,task_name ,decode (task_name ,$1 ,$2 ,user_name) ,role_id ,stru_id ,prev_task_id ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,business_type ,business_id ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,app_stru ,app_stru_name ,url ,in_sys_seq FROM ( SELECT task_id ,pckg_dams_task.func_get_cur_task ( business_id ) task_name ,decode ( role_id ,$3 ,name ,pckg_dams_task.func_get_cur_dealer ( business_id ) ) user_name ,role_id ,stru_id ,prev_task_id ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,business_type ,business_id ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,app_stru ,app_stru_name ,url ,in_sys_seq FROM ( SELECT task_id ,business_id ,role_id ,( SELECT listagg ( u1.name ,$4 ) within GROUP ( ORDER BY u1.name ) AS NAME FROM dams_inner_todo_task t_open ,dams_user u1 WHERE t_open.business_id = tmp.business_id AND t_open.task_state = $5 AND t_open.ssic_id = u1.ssic_id ) AS name ,stru_id ,prev_task_id ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,pckg_dams_util.func_decode ( $6 ,business_type ,$7 ) business_type ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,app_stru ,app_stru_name ,url ,in_sys_seq FROM ( SELECT x.task_id ,x.task_name ,x.ssic_id ,x.user_name ,x.stru_id ,x.role_id ,x.prev_task_id ,x.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = x.prev_ssic_id ) prev_person_name ,x.prev_stru_id ,x.prev_role_id ,x.procinst_id ,x.process_id ,x.process_name ,x.form_id ,x.business_type ,x.business_id ,x.title ,x.create_time ,x.take_time ,x.end_time ,x.task_state ,x.outgoing_name ,x.opinion ,x.applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = x.applyer ) apply_name ,x.apply_time ,x.app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = x.app_stru ) app_stru_name ,x.url ,x.in_sys_seq FROM ( SELECT to_char( t1.task_id ) task_id ,t1.task_name ,NULL ssic_id ,NULL user_name ,t1.stru_id ,t1.role_id ,t1.prev_task_id ,t1.prev_ssic_id ,t1.prev_stru_id ,t1.prev_role_id ,t4.procinst_id ,t4.process_id ,t4.process_name ,t1.form_id ,t4.business_type ,t4.business_id ,t4.title ,t1.create_time ,t1.take_time ,t1.end_time ,t1.task_state ,t1.outgoing_name ,t1.opinion ,t4.creator_id applyer ,to_char( t4.start_time ,$8 ) apply_time ,t4.creator_stru app_stru ,NULL url ,NULL in_sys_seq FROM dams_wf_task t1 ,dams_wf_process t4,( SELECT ttt1.task_id ,ttt1.procinst_id ,row_number() over(PARTITION BY procinst_id order by decode ( ttt1.task_state ,$9 ,$10 ,$11 ) asc ,ttt1.create_time DESC,ttt1.task_id desc) rn FROM dams_wf_task ttt1 ) ttt1 WHERE t1.procinst_id = t4.procinst_id AND EXISTS ( SELECT $12 FROM dams_wf_process_conf t3 WHERE t3.pdid = t4.process_id AND t3.sys_code = nvl( $13 ,t3.sys_code ) ) AND( EXISTS ( SELECT $14 FROM dams_wf_task t2 ,dams_wf_participation p2 WHERE t2.procinst_id = p2.procinst_id AND t2.prev_task_id = p2.pre_task_id AND t2.procinst_id = t1.procinst_id AND p2.ssic_id = $15 AND t2.task_state IN ( $16 ) ) OR EXISTS ( SELECT $17 FROM dams_wf_task t2 WHERE t2.procinst_id = t1.procinst_id AND t2.ssic_id = $18 AND t2.task_state IN ( $19 ) ) ) AND nvl( t4.business_type ,$20 ) = nvl( $21 ,nvl( t4.business_type ,$22 ) ) AND t4.valid_flag = $23 AND t1.task_id = ttt1.task_id AND ttt1.procinst_id = t4.procinst_id AND ttt1.rn=$24 UNION ALL SELECT i.task_id ,NULL task_name ,i.ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.ssic_id ) user_name ,NULL stru_id ,$25 role_id ,NULL prev_task_id ,i.prev_ssic_id ,NULL prev_stru_id ,NULL prev_role_id ,NULL procinst_id ,NULL process_id ,NULL process_name ,NULL form_id ,i.business_type ,i.business_id ,i.title ,i.create_time ,i.take_time ,i.end_time ,i.task_state ,NULL outgoing_name ,NULL opinion ,i.creator_id applyer ,to_char( i.create_time ,$26 ) apply_time ,i.creator_stru app_stru ,i.url ,i.in_sys_seq FROM dams_inner_todo_task i WHERE i.ssic_id = $27 AND i.task_state = $28 AND i.sys_code = nvl( $29 ,i.sys_code ) AND nvl( i.business_type ,$30 ) = nvl( $31 ,nvl( i.business_type ,$32 ) ) ) x ORDER BY x.create_time DESC limit $33 offset $34$35) tmp ) tmp ) ORDER BY create_time ;
set current_schema=dams;
WITH RECURSIVE migora_cte AS ( SELECT menu_id ,parent_id ,$1 AS LEVEL FROM dams_menu tt1 WHERE tt1.menu_id IN ( SELECT DISTINCT t1.resource_id FROM dams_acl t1 ,dams_user_role_rel t2 ,dams_role t3 ,dams_branch_relation r ,dams_branch_catalog c ,dams_branch h WHERE t1.principal_id = t2.role_id AND t1.principal_type = $2 AND t1.resource_type = $3 AND t2.ssic_id = $4 AND t2.stru_id = r.bnch_id AND t2.stru_id = c.stru_id AND c.major_stru_id = h.stru_id AND( instr( $5 ,t1.resource_id ) = $6 OR r.up_bnch_id = $7 OR ( t1.resource_id = $8 AND r.up_bnch_id = $9 ) OR( t1.resource_id = $10 AND r.up_bnch_id = $11 ) ) AND( instr( $12 ,t1.resource_id ) = $13 OR h.stru_grade IN ( $14 ,$15 ,$16 ) ) AND( instr( $17 ,t1.resource_id ) = $18 OR NOT EXISTS ( SELECT $19 FROM dams_user_role_rel t WHERE t.ssic_id = t2.ssic_id AND t.role_id IN ( $20 ,$21 ) AND t.auth_state IN ( $22 ,$23 ) ) ) AND t2.role_id = t3.role_id AND t2.auth_state <> $24 AND t3.status = $25 AND( $26 = ( SELECT COUNT( $27 ) FROM dams_menu_stru_rel sr WHERE sr.menu_id = t1.resource_id ) OR NOT EXISTS ( SELECT $28 FROM dams_menu_stru_rel sr ,dams_branch_relation br WHERE sr.stru_id = br.up_bnch_id AND br.bnch_id = t2.stru_id AND sr.menu_id = t1.resource_id AND sr.status = $29 ) ) AND( t2.sys_code = $30 OR( EXISTS ( SELECT $31 FROM dams_branch_sys_rel t ,dams_branch_relation r WHERE r.bnch_id = t2.stru_id AND t.stru_id = r.up_bnch_id AND t.sys_code = t2.sys_code AND t.start_use = $32 ) AND NOT EXISTS ( SELECT $33 FROM dams_branch_sys_rel t ,dams_branch_relation r WHERE r.bnch_id = t2.stru_id AND t.stru_id = r.up_bnch_id AND t.sys_code = t2.sys_code AND t.start_use = $34 ) ) ) UNION ALL SELECT DISTINCT t1.resource_id FROM dams_acl t1 ,dams_user_role_rel t2 ,dams_role t3 ,dams_branch_relation r WHERE t1.principal_id = t2.role_id AND t1.principal_type = $35 AND t1.resource_type = $36 AND t2.ssic_id = $37 AND t2.role_id = t3.role_id AND t2.auth_state = $38 AND t3.status = $39 AND r.bnch_id = t2.stru_id AND( $40 = ( SELECT COUNT( $41 ) FROM dams_menu_stru_rel sr WHERE sr.menu_id = t1.resource_id ) OR NOT EXISTS ( SELECT $42 FROM dams_menu_stru_rel sr ,dams_branch_relation br WHERE sr.stru_id = br.up_bnch_id AND br.bnch_id = t2.stru_id AND sr.menu_id = t1.resource_id AND sr.status = $43 ) ) AND t1.resource_id IN ( SELECT m.menu_id FROM dams_menu m WHERE m.parent_id = $44 ) AND( t2.sys_code = $45 OR( EXISTS ( SELECT $46 FROM dams_branch_sys_rel t ,dams_branch_relation r WHERE r.bnch_id = t2.stru_id AND t.stru_id = r.up_bnch_id AND t.sys_code = t2.sys_code AND t.start_use = $47 ) AND NOT EXISTS ( SELECT $48 FROM dams_branch_sys_rel t ,dams_branch_relation r WHERE r.bnch_id = t2.stru_id AND t.stru_id = r.up_bnch_id AND t.sys_code = t2.sys_code AND t.start_use = $49 ) ) ) UNION ALL SELECT t.menu_id resource_id FROM dams_menu_nls t WHERE t.menu_id IN ( $50 ,$51 ,$52 ) AND t.locale = $53 AND EXISTS ( SELECT $54 FROM dams_user u WHERE u.ssic_id = $55 AND u.person_id IS NOT NULL ) ) AND tt1.sys_code IN ( SELECT t.sys_code FROM dams_sys_url_cfg t ) AND tt1.status = $56 AND tt1.isleaf = $57 UNION ALL SELECT tt1.menu_id ,tt1.parent_id ,mig_ora_cte_tab_alias.LEVEL + $58 AS LEVEL FROM migora_cte mig_ora_cte_tab_alias INNER JOIN dams_menu tt1 ON mig_ora_cte_tab_alias.parent_id = tt1.menu_id ) SELECT DISTINCT menu_id FROM migora_cte tt1;
set current_schema=dams;
SELECT task_id ,task_name ,user_name ,role_id ,stru_id ,prev_task_id ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,pckg_dams_util.func_decode ( $1 ,business_type ,$2 ) business_type ,business_id ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,complete_time ,app_stru ,app_stru_name ,url ,in_sys_seq FROM ( SELECT x.task_id ,x.task_name ,x.ssic_id ,x.user_name ,x.stru_id ,x.role_id ,x.prev_task_id ,x.prev_ssic_id ,x.prev_person_name ,x.prev_stru_id ,x.prev_role_id ,x.procinst_id ,x.process_id ,x.process_name ,x.form_id ,x.business_type ,x.business_id ,x.title ,x.create_time ,x.take_time ,x.end_time ,x.task_state ,x.outgoing_name ,x.opinion ,x.applyer ,x.apply_name ,x.apply_time ,x.complete_time ,x.app_stru ,x.app_stru_name ,x.url ,x.in_sys_seq FROM ( SELECT to_char( t1.task_id ) task_id ,t1.task_name ,t1.ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = t1.ssic_id ) user_name ,t1.stru_id ,t1.role_id ,t1.prev_task_id ,t1.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = t1.prev_ssic_id ) prev_person_name ,t1.prev_stru_id ,t1.prev_role_id ,t4.procinst_id ,t4.process_id ,t4.process_name ,t1.form_id ,t4.business_type ,t4.business_id ,t4.title ,t1.create_time ,t1.take_time ,t1.end_time ,t1.task_state ,t1.outgoing_name ,t1.opinion ,t4.creator_id applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = t4.creator_id ) apply_name ,to_char( t4.start_time ,$3 ) apply_time ,to_char( t4.complete_time ,$4 ) complete_time ,t4.creator_stru app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = t4.creator_stru ) app_stru_name ,$5 url ,$6 in_sys_seq FROM dams_wf_hist_task t1 ,dams_wf_hist_process t4 left join (SELECT MAX( ttt1.create_time ) create_time,ttt1.procinst_id FROM dams_wf_hist_task ttt1 group by ttt1.procinst_id) ttt1 on ttt1.procinst_id = t4.procinst_id WHERE t1.procinst_id = t4.procinst_id AND EXISTS ( SELECT $7 FROM dams_wf_process_conf t3 WHERE t3.pdid = t4.process_id AND t3.sys_code = nvl( $8 ,t3.sys_code ) ) AND( EXISTS ( SELECT $9 FROM dams_wf_hist_task t2 ,dams_wf_participation p2 WHERE t2.procinst_id = p2.procinst_id AND t2.prev_task_id = p2.pre_task_id AND t2.procinst_id = t1.procinst_id AND p2.ssic_id = $10 ) OR EXISTS ( SELECT $11 FROM dams_wf_hist_task t2 WHERE t2.ssic_id = $12 AND t2.procinst_id = t4.procinst_id ) ) AND nvl( t4.business_type ,$13 ) = nvl( $14 ,nvl( t4.business_type ,$15 ) ) AND( t1.create_time = ttt1.create_time OR( t1.is_first = $16 AND ttt1.create_time IS NULL ) ) AND t4.valid_flag = $17 UNION ALL SELECT i.task_id ,NULL task_name ,i.ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.ssic_id ) user_name ,NULL stru_id ,$18 role_id ,NULL prev_task_id ,i.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.prev_ssic_id ) prev_person_name ,NULL prev_stru_id ,NULL prev_role_id ,NULL procinst_id ,NULL process_id ,NULL process_name ,NULL form_id ,i.business_type ,i.business_id ,i.title ,i.create_time ,i.take_time ,i.end_time ,i.task_state ,NULL outgoing_name ,NULL opinion ,i.creator_id applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.creator_id ) apply_name ,NULL apply_time ,to_char( i.end_time ,$19 ) complete_time ,i.creator_stru app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = i.creator_stru ) app_stru_name ,i.url ,i.in_sys_seq FROM dams_inner_over_task i WHERE i.ssic_id = $20 AND i.task_state = $21 AND i.sys_code = nvl( $22 ,i.sys_code ) AND nvl( i.business_type ,$23 ) = nvl( $24 ,nvl( i.business_type ,$25 ) ) ) x ORDER BY nvl( x.create_time ,x.end_time ) DESC limit to_number( $26 ) offset to_number( $27-$28));
set current_schema=dams;
SELECT task_id ,task_name ,user_name ,stru_id ,role_id ,prev_task_id ,prev_task_name ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,pckg_dams_util.func_decode ( $1 , business_type ,$2 ) business_type ,business_id ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,app_stru ,app_stur_name ,cfg_id ,url ,show_business_id ,$3 rn FROM ( SELECT task_id ,task_name ,user_name ,stru_id ,role_id ,prev_task_id ,prev_task_name ,prev_ssic_id ,prev_person_name ,prev_stru_id ,procinst_id ,process_id ,process_name ,form_id ,PCKG_DAMS_TASK.func_convert_businesstype ( business_type ) business_type ,business_id ,title ,create_time ,take_time ,end_time ,task_state ,outgoing_name ,opinion ,apply_name ,apply_time ,app_stru ,app_stur_name ,cfg_id ,url ,COALESCE( out_sys_seq ,business_id ) show_business_id , ordertime FROM ( SELECT $4 task_id ,$5 task_name ,t.applyer ,$6 user_name ,t.app_stru stru_id ,$7 role_id ,$8 prev_task_id ,$9 prev_task_name ,t.applyer prev_ssic_id ,$10 prev_person_name ,$11 prev_stru_id ,$12 prev_role_id ,t.app_id procinst_id ,$13 process_id ,$14 process_name ,PCKG_DAMS_TASK.func_get_form_id_from_pdid ( t.pdid ,t.app_id ) form_id ,t.biz_type business_type ,t.app_id business_id ,t.info title ,to_char( t.app_time ,$15 ) create_time ,to_char( t.app_time ,$16 ) take_time ,$17 end_time ,$18 task_state ,$19 outgoing_name ,$20 opinion ,t.applyer applyer ,$21 apply_name ,to_char( t.app_time ,$22 ) apply_time ,t.app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = t.app_stru ) app_stur_name ,NULL cfg_id ,$23 url ,to_char( t.app_time ,$24 ) ordertime ,$25 out_sys_seq FROM dams_save_info t ,( SELECT t2.pdid ,MAX( t2.sys_code ) sys_code FROM dams_wf_process_conf t2 GROUP BY t2.pdid ) t1 WHERE t.applyer = $26 AND t1.pdid = t.pdid AND t1.sys_code = nvl( $27 ,t1.sys_code ) AND nvl( t.biz_type ,$28 ) = nvl( $29 ,nvl( t.biz_type ,$30 ) ) AND t.valid_flag = $31 UNION ALL ( SELECT to_char( t1.task_id ) ,t1.task_name ,t1.ssic_id ,$32 user_name ,t1.stru_id ,t1.role_id ,t1.prev_task_id ,( SELECT wt.task_name FROM dams_wf_task wt WHERE wt.task_id = t1.prev_task_id ) prev_task_name ,t1.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = t1.prev_ssic_id ) prev_person_name ,t1.prev_stru_id ,t1.prev_role_id ,t4.procinst_id ,t4.process_id ,t4.process_name ,t1.form_id ,t4.business_type ,t4.business_id ,t4.title ,to_char( t1.create_time ,$33 ) create_time ,to_char( t1.take_time ,$34 ) take_time ,to_char( t1.end_time ,$35 ) end_time ,t1.task_state ,t1.outgoing_name ,t1.opinion ,t4.creator_id applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = t4.creator_id ) apply_name ,to_char( t4.start_time ,$36 ) apply_time ,t4.creator_stru app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = t4.creator_stru ) app_stru_name ,t4.cfg_id cfgid ,$37 url ,to_char( t1.create_time ,$38 ) ordertime ,$39 out_sys_seq FROM dams_wf_task t1 ,dams_wf_process t4 WHERE t4.sys_code = nvl( $40 ,t4.sys_code ) AND EXISTS ( SELECT $41 FROM jbpm4_participation t2 WHERE t2.userid_ = $42 AND t2.task_ = t1.task_id ) AND t1.procinst_id = t4.procinst_id AND t1.task_state IN ( $43 ,$44 ) AND nvl( t4.business_type ,$45 ) = nvl( $46 ,nvl( t4.business_type ,$47 ) ) AND t4.valid_flag = $48 ) UNION ALL ( SELECT i.task_id ,$49 task_name ,i.ssic_id ,$50 user_name ,$51 stru_id ,$52 role_id ,NULL prev_task_id ,i.prev_task_name prev_task_name ,i.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.prev_ssic_id ) prev_person_name ,$53 prev_stru_id ,$54 prev_role_id ,NULL procinst_id ,NULL process_id ,$55 process_name ,NULL form_id ,i.business_type ,i.business_id ,i.title ,to_char( i.create_time ,$56 ) create_time ,to_char( i.take_time ,$57 ) take_time ,$58 end_time ,i.task_state ,$59 outgoing_name ,$60 opinion ,i.creator_id applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = i.creator_id ) apply_name ,$61 apply_time ,i.creator_stru app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = i.creator_stru ) app_stru_name ,NULL cfgid ,i.url ,to_char( i.create_time ,$62 ) ordertime ,i.in_sys_seq FROM dams_inner_todo_task i WHERE i.ssic_id = $63 AND i.task_state = $64 AND i.sys_code = nvl( $65 ,i.sys_code ) AND nvl( i.business_type ,$66 ) = nvl( $67 ,nvl( i.business_type ,$68 ) ) ) UNION ALL ( SELECT to_char( outtask.task_id ) ,outtask.task_name ,outtask.ssic_id ,$69 user_name ,outtask.stru_id ,$70 role_id ,outtask.prev_task_id ,outtask.prev_task_name ,outtask.prev_ssic_id ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = outtask.prev_ssic_id ) prev_person_name ,outtask.prev_stru_id ,outtask.prev_role_id ,outtask.procinst_id ,outtask.process_id ,outtask.process_name ,outtask.form_id ,outtask.business_type ,outtask.business_id ,decode ( $71 ,$72 ,outtask.title ,REPLACE( outtask.title ,$73 ,$74 ) ) ,to_char( to_date( outtask.create_time ,$75 ) ,$76 ) create_time ,to_char( to_date( outtask.take_time ,$77 ) ,$78 ) take_time ,to_char( to_date( outtask.end_time ,$79 ) ,$80 ) end_time ,outtask.task_state ,outtask.outgoing_name ,outtask.opinion ,outtask.creator_id applyer ,( SELECT u.name FROM dams_user u WHERE u.ssic_id = outtask.creator_id ) apply_name ,to_char( to_date( outtask.start_time ,$81 ) ,$82 ) apply_time ,outtask.creator_stru app_stru ,( SELECT b.stru_sname FROM dams_branch b WHERE b.stru_id = outtask.creator_stru ) app_stru_name ,outtask.cfgid ,t.sysurl || $83 || t.context || $84 || outtask.url url ,outtask.create_time ordertime ,decode ( outtask.task_id ,$85 ,decode ( $86 ,$87 ,outtask.out_sys_seq ,decode ( outtask.sys_code ,$88 ,decode ( outtask.business_type ,$89 ,$90 ,$91 ,$92 ,outtask.out_sys_seq ) ,outtask.out_sys_seq ) ) ,outtask.out_sys_seq ) out_sys_seq FROM dams_outer_todo_task outtask ,dams_sys_url_cfg t WHERE outtask.sys_code = nvl( $93 ,outtask.sys_code ) AND nvl( PCKG_DAMS_TASK.func_convert_businesstype ( outtask.business_type ) ,$94 ) = nvl( $95 ,nvl( PCKG_DAMS_TASK.func_convert_businesstype ( outtask.business_type ) ,$96 ) ) AND outtask.ssic_id = $97 AND outtask.sys_code = t.sys_code AND outtask.task_state = $98 ) ) tn ORDER BY ordertime DESC limit to_number( $99 ) offset to_number($100));
