{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { PieChart, GraphChart } from 'echarts/charts';\nimport { GridComponent, LegendComponent, TitleComponent, TooltipComponent } from 'echarts/components';\nimport { default as VChart, THEME_KEY } from 'vue-echarts';\nimport { dataset, distribution, preview, recommend } from '@/api/api';\nuse([CanvasRenderer, PieChart, GraphChart, TooltipComponent, TitleComponent, GridComponent, LegendComponent]);\nexport default {\n  name: 'Index',\n  components: {\n    VChart\n  },\n  provide: {\n    [THEME_KEY]: 'light'\n  },\n  data() {\n    return {\n      datasetOptions: [],\n      dbSelect: undefined,\n      schema: '',\n      wow: null,\n      innerVisible: false,\n      costVisible: false,\n      theme: '',\n      pieOption: {\n        title: {\n          show: false,\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        series: [{\n          data: [{\n            'columns': 9,\n            'value': '203',\n            'name': 'orders'\n          }, {\n            'columns': 16,\n            'value': '872',\n            'name': 'lineitem'\n          }, {\n            'columns': 8,\n            'value': '28',\n            'name': 'customer'\n          }, {\n            'columns': 7,\n            'value': '0.208',\n            'name': 'supplier'\n          }],\n          label: {\n            alignTo: 'edge',\n            minMargin: 5,\n            edgeDistance: 10,\n            lineHeight: 15\n          },\n          radius: ['0', '60%'],\n          type: 'pie',\n          center: ['50%', '50%'],\n          itemStyle: {\n            borderWidth: 0,\n            borderColor: '#ffffff'\n          }\n        }]\n      },\n      column2GraphOption: {\n        tooltip: {},\n        series: [{\n          name: '',\n          type: 'graph',\n          layout: 'circular',\n          data: [{\n            'category': 0,\n            'id': 'l_orderkey',\n            'name': 'l_orderkey',\n            'symbolSize': 60,\n            'value': 0.2499493807554245\n          }, {\n            'category': 1,\n            'id': 'l_quantity',\n            'name': 'l_quantity',\n            'symbolSize': 20,\n            'value': 8.331646313308738e-06\n          }, {\n            'category': 2,\n            'id': 'l_shipdate',\n            'name': 'l_shipdate',\n            'symbolSize': 20,\n            'value': 0.0004209147591609508\n          }, {\n            'category': 3,\n            'id': 'o_orderkey',\n            'name': 'o_orderkey',\n            'symbolSize': 60,\n            'value': 1.0\n          }, {\n            'category': 4,\n            'id': 'o_custkey',\n            'name': 'o_custkey',\n            'symbolSize': 60,\n            'value': 0.06666400283575058\n          }, {\n            'category': 5,\n            'id': 'o_orderdate',\n            'name': 'o_orderdate',\n            'symbolSize': 20,\n            'value': 0.0016039999900385737\n          }, {\n            'category': 6,\n            'id': 'c_custkey',\n            'name': 'c_custkey',\n            'symbolSize': 60,\n            'value': 1.0\n          }],\n          links: [{\n            'lineStyle': {\n              'width': 6.04\n            },\n            'source': 'l_orderkey',\n            'target': 'o_orderkey',\n            'value': 604.0\n          }, {\n            'lineStyle': {\n              'width': 20\n            },\n            'source': 'l_shipdate',\n            'target': 'o_orderdate',\n            'value': 365792.0\n          }, {\n            'lineStyle': {\n              'width': 1.89\n            },\n            'source': 'o_custkey',\n            'target': 'c_custkey',\n            'value': 189.0\n          }],\n          categories: [0, 1, 2, 3, 4, 5, 6],\n          center: ['50%', '50%'],\n          roam: true,\n          force: {\n            repulsion: 100\n          },\n          lineStyle: {\n            color: 'source',\n            curveness: 0.5\n          },\n          label: {\n            show: true,\n            color: 'auto'\n          },\n          itemStyle: {},\n          emphasis: {\n            focus: 'adjacency',\n            lineStyle: {\n              width: 10\n            }\n          }\n        }],\n        animationDuration: 1500,\n        animationEasingUpdate: 'quinticInOut'\n      },\n      checkedList: [],\n      distributions: [],\n      recommends: [{\n        'column': 'l_orderkey,l_shipdate',\n        'partition_sql': 'ALTER TABLE lineitem set distributed by(l_orderkey,l_shipdate);',\n        'table': 'lineitem'\n      }, {\n        'column': 'o_orderkey,o_custkey,o_orderdate',\n        'partition_sql': 'ALTER TABLE orders set distributed by(o_orderkey,o_custkey,o_orderdate);',\n        'table': 'orders'\n      }, {\n        'column': 'c_custkey',\n        'partition_sql': 'ALTER TABLE customer set distributed by(c_custkey);',\n        'table': 'customer'\n      }],\n      beforeNode1Points: 32542,\n      beforeNode2Points: 32539,\n      afterNode1Points: 32553,\n      afterNode2Points: 32528,\n      beforePerformance: 2.5126,\n      afterPerformance: 2.5118,\n      hideStep1: true,\n      hideStep2: true,\n      hideStep3: true,\n      loading1: false,\n      loading2: false,\n      loading3: false\n    };\n  },\n  computed: {\n    canAction() {\n      return this.checkedList.length > 0;\n    }\n  },\n  mounted() {\n    var theme = sessionStorage.getItem('theme-key') || 'light';\n    this.theme = theme;\n    document.body.setAttribute('theme-mode', theme);\n    this.column2GraphOption.series[0].label.color = theme === 'dark' ? '#fff' : '#000';\n    this.getDataset();\n    this.pieOption.tooltip.formatter = function (param, ticket, callback) {\n      const result = `${param.marker}Tabel:&nbsp${param.data['name']}</br>&nbsp&nbsp&nbspColumns:&nbsp${param.data['columns']}</br>&nbsp&nbsp&nbspSize:&nbsp${param.data['value']}MB</br>`;\n      setTimeout(function () {\n        // 仅为了模拟异步回调\n        callback(ticket, result);\n      }, 100);\n      return 'loading...';\n    };\n    this.pieOption.series[0].label.formatter = function (data) {\n      let columns = String(data.data.columns).toUpperCase();\n      return data + '\\n' + data.data.columns + ' columns';\n    };\n  },\n  destroyed() {\n    if (this.explainSqlTypedObj) {\n      this.explainSqlTypedObj.destroy();\n    }\n    if (this.explainNodeTypedObj) {\n      this.explainNodeTypedObj.destroy();\n    }\n  },\n  methods: {\n    onThemeClick() {\n      var theme = sessionStorage.getItem('theme-key') === 'dark' ? 'light' : 'dark';\n      this.theme = theme;\n      sessionStorage.setItem('theme-key', theme);\n      document.body.setAttribute('theme-mode', theme);\n      this.column2GraphOption.series[0].label.color = theme === 'dark' ? '#fff' : '#000';\n    },\n    onCheckBoxChange(index) {\n      if (this.checkedList.indexOf(index) > -1) {\n        this.checkedList.splice(this.checkedList.indexOf(index), 1);\n      } else {\n        this.checkedList.push(index);\n      }\n    },\n    getDataset() {\n      dataset().then(res => {\n        this.datasetOptions = res.data || [];\n        if (this.datasetOptions.length > 0) {\n          this.dbSelect = this.datasetOptions[0].value;\n        }\n      });\n    },\n    onLoadClcik() {\n      if (!this.dbSelect) {\n        this.$message.warning('Please select a dataset！');\n        return;\n      }\n      this.getDistributions();\n    },\n    onPartitonClcik() {\n      this.getRecommend();\n    },\n    getDistributions() {\n      this.loading1 = true;\n      distribution({\n        dataset: this.dbSelect\n      }).then(res => {\n        const distributions = res.data.distributions || [];\n        this.distributions = distributions.map(item => {\n          if (item.size.slice(-2).toLowerCase() === 'kb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' kb', '')) / 1024;\n          } else if (item.size.slice(-2).toLowerCase() === 'mb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' mb', ''));\n          } else if (item.size.slice(-2).toLowerCase() === 'gb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' mb', '')) * 1024;\n          }\n          return {\n            name: item.table_name,\n            value: item.size,\n            columns: item.columns\n          };\n        });\n        this.pieOption.series[0].data = this.distributions;\n        const column2Graph = res.data.column2Graph || {};\n        this.column2GraphOption.series[0].data = column2Graph.nodes;\n        this.column2GraphOption.series[0].links = column2Graph.links;\n        this.column2GraphOption.series[0].categories = column2Graph.categories;\n        this.hideStep1 = false;\n      }).finally(() => {\n        this.loading1 = false;\n      });\n    },\n    getRecommend() {\n      this.loading2 = true;\n      recommend({\n        dataset: this.dbSelect\n      }).then(res => {\n        this.recommends = res.data || [];\n        this.hideStep2 = false;\n      }).finally(() => {\n        this.loading2 = false;\n      });\n    },\n    onActionClick() {\n      var recommend = this.recommends.filter((item, index) => {\n        return this.checkedList.indexOf(index) > -1;\n      }) || [];\n      var partitionKeys = {};\n      recommend.forEach(item => {\n        partitionKeys[item.table] = item.column;\n      });\n      this.loading3 = true;\n      preview({\n        partition_keys: partitionKeys\n      }).then(res => {\n        this.hideStep3 = false;\n        this.beforeNode1Points = res.data.distribution.before.node_0.points;\n        this.beforeNode2Points = res.data.distribution.before.node_1.points;\n        this.afterNode1Points = res.data.distribution.after.node_0.points;\n        this.afterNode2Points = res.data.distribution.after.node_1.points;\n        this.beforePerformance = res.data.performance.before;\n        this.afterPerformance = res.data.performance.after;\n      }).finally(() => {\n        this.loading3 = false;\n      });\n    }\n  }\n};","map":{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n    <div\n        class=\"c-flex-row c-justify-content-between c-align-items-center\"\n        style=\"margin: 10px 20px; font-weight: bolder; font-size: 30px; color: var(--text_color); overflow: auto\"\n    >\n      <span>DatabasePartition</span>\n      <div style=\"cursor: pointer;\" @click=\"onThemeClick\">\n        <img v-if=\"theme === 'light'\" class=\"theme-icon\" src=\"@/assets/night.png\" style=\"width: 32px; height: 32px\">\n        <img v-else class=\"theme-icon\" src=\"@/assets/light.png\" style=\"width: 32px; height: 32px\">\n      </div>\n    </div>\n\n    <div class=\"c-flex-row c-justify-content-between\" style=\"margin: 10px 20px;\">\n      <div class=\"c-flex-column\" style=\"width: 30%; min-width: 300px; margin-right: 10px\">\n        <el-card shadow=\"always\" style=\"width: 100%; \">\n          <el-select v-model=\"dbSelect\" class=\"dbSelect\" placeholder=\"请选择\">\n            <el-option\n                v-for=\"item in datasetOptions\"\n                :key=\"item.value\"\n                :label=\"item.name\"\n                :value=\"item.value\"\n            />\n          </el-select>\n          <el-button type=\"success\" style=\"margin-left: 20px\" @click=\"onLoadClcik()\">LOAD</el-button>\n        </el-card>\n        <el-card class=\"c-relative\" shadow=\"always\" style=\"width: 100%; margin-top: 10px;\" v-loading=\"loading1\">\n          <div class=\"c-relative c-flex-column\" style=\"width: 100%;\">\n            <span style=\"color: var(--text_color); font-size: 16px\">Data Statistics</span>\n            <VChart style=\"width: 100%; height: 340px;\" :option=\"pieOption\" autoresize />\n          </div>\n          <div class=\"c-relative c-flex-column\" style=\"width: 100%;\">\n            <span style=\"color: var(--text_color); font-size: 16px\">Query Statistics</span>\n            <VChart style=\"width: 100%; height: 330px;\" :option=\"column2GraphOption\" autoresize />\n          </div>\n          <el-button class=\"c-relative\" type=\"success\" style=\"margin-bottom: 10px; float: right\" @click=\"onPartitonClcik()\">PARTITION\n          </el-button>\n          <div v-if=\"hideStep1\" class=\"Mask\" />\n        </el-card>\n      </div>\n\n      <div class=\"c-relative c-flex-column\" style=\"width: calc(70% - 30px);\">\n        <el-card class=\"c-relative\" shadow=\"always\" style=\"width: 100%;\" v-loading=\"loading2\">\n          <span style=\"color: var(--text_color); font-size: 16px\">Selected Keys</span>\n          <div style=\"overflow-y: scroll; height: 380px\">\n            <div v-for=\"(item, index) in recommends\" :key=\"index\" class=\"suggest-item\">\n              <el-checkbox :checked=\"checkedList.indexOf(index) > -1\" @change=\"onCheckBoxChange(index)\" />\n              <div class=\"c-flex-column\" style=\"margin-left: 10px; font-size: 14px; color: var(--text_grey)\">\n                <span>Table: <span style=\"color: var(--text_color)\">{{ item.table }}</span></span>\n                <span>PartitionKey:<span style=\"color: var(--text_color)\">{{ item.column }}</span></span>\n                <span style=\"font-size: 14px; color: var(--text_grey)\">Statement: <span style=\"color: var(--text_color)\">{{ item.partition_sql }}</span></span>\n              </div>\n            </div>\n          </div>\n          <el-button class=\"c-relative\" :disabled=\"!canAction\" type=\"success\" style=\"margin: 10px 0 10px 0; float: right\" @click=\"onActionClick()\">ACTION\n          </el-button>\n          <div v-if=\"hideStep2\" class=\"Mask\" />\n        </el-card>\n\n        <el-card class=\"c-relative\" shadow=\"always\" style=\"margin-top: 10px; height: 380px\" v-loading=\"loading3\">\n          <div class=\"c-relative c-flex-row c-align-items-center\" style=\"width: 100%; height: 380px\">\n            <div class=\"c-flex-column c-align-items-center\" style=\"width: 100%;\">\n              <div class=\"c-flex-row c-justify-content-around c-align-items-center\" style=\"width: 100%;\">\n                <div class=\"c-flex-column c-relative c-align-items-center c-justify-content-center\">\n                  <img class=\"c-relative\" src=\"@/assets/db.png\" style=\"width: 200px; height: 200px\">\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 5px; left: 0; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    {{ beforeNode1Points }}\n                  </span>\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 5px; left: 120px; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    {{ beforeNode2Points }}\n                  </span>\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 80px; left: 60px; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    Master\n                  </span>\n                  <span style=\"margin-top: 10px; color: var(--text_color)\">Latency: {{ beforePerformance }}</span>\n                </div>\n                <div class=\"c-flex-column c-relative c-align-items-center c-justify-content-center\" style=\"width: 20%;\">\n                  <img src=\"@/assets/arrow.png\" style=\"width: 100%; height: 30px\">\n                  <span style=\"color: var(--text_color); margin-top: 10px\">After Partitioning</span>\n                </div>\n                <div class=\"c-flex-column c-relative c-align-items-center c-justify-content-center\">\n                  <img class=\"c-relative\" src=\"@/assets/db.png\" style=\"width: 200px; height: 200px\">\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 5px; left: 0; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    {{ afterNode1Points }}\n                  </span>\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 5px; left: 120px; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    {{ afterNode2Points }}\n                  </span>\n                  <span\n                      class=\"c-absolute\"\n                      style=\"top: 80px; left: 60px; color: #FFFFFF; font-size: 18px; width: 80px; text-align: center;\"\n                  >\n                    Master\n                  </span>\n                  <span style=\"margin-top: 10px; color: var(--text_color)\">Latency: {{ afterPerformance }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div v-if=\"hideStep3\" class=\"Mask\" />\n        </el-card>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport { use } from 'echarts/core'\nimport { CanvasRenderer } from 'echarts/renderers'\nimport { PieChart, GraphChart } from 'echarts/charts'\nimport { GridComponent, LegendComponent, TitleComponent, TooltipComponent } from 'echarts/components'\nimport { default as VChart, THEME_KEY } from 'vue-echarts'\nimport { dataset, distribution, preview, recommend } from '@/api/api'\n\nuse([\n  CanvasRenderer,\n  PieChart,\n  GraphChart,\n  TooltipComponent,\n  TitleComponent,\n  GridComponent,\n  LegendComponent\n])\n\nexport default {\n  name: 'Index',\n  components: {\n    VChart\n  },\n  provide: {\n    [THEME_KEY]: 'light'\n  },\n  data() {\n    return {\n      datasetOptions: [],\n      dbSelect: undefined,\n      schema: '',\n      wow: null,\n      innerVisible: false,\n      costVisible: false,\n      theme: '',\n      pieOption: {\n        title: {\n          show: false,\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        series: [\n          {\n            data: [\n              {\n                'columns': 9,\n                'value': '203',\n                'name': 'orders'\n              },\n              {\n                'columns': 16,\n                'value': '872',\n                'name': 'lineitem'\n              },\n              {\n                'columns': 8,\n                'value': '28',\n                'name': 'customer'\n              },\n              {\n                'columns': 7,\n                'value': '0.208',\n                'name': 'supplier'\n              }\n            ],\n            label: {\n              alignTo: 'edge',\n              minMargin: 5,\n              edgeDistance: 10,\n              lineHeight: 15\n            },\n            radius: ['0', '60%'],\n            type: 'pie',\n            center: ['50%', '50%'],\n            itemStyle: {\n              borderWidth: 0,\n              borderColor: '#ffffff'\n            }\n          }\n        ]\n      },\n      column2GraphOption: {\n        tooltip: {},\n        series: [\n          {\n            name: '',\n            type: 'graph',\n            layout: 'circular',\n            data: [{\n              'category': 0,\n              'id': 'l_orderkey',\n              'name': 'l_orderkey',\n              'symbolSize': 60,\n              'value': 0.2499493807554245\n            },\n              {\n                'category': 1,\n                'id': 'l_quantity',\n                'name': 'l_quantity',\n                'symbolSize': 20,\n                'value': 8.331646313308738e-06\n              },\n              {\n                'category': 2,\n                'id': 'l_shipdate',\n                'name': 'l_shipdate',\n                'symbolSize': 20,\n                'value': 0.0004209147591609508\n              },\n              {\n                'category': 3,\n                'id': 'o_orderkey',\n                'name': 'o_orderkey',\n                'symbolSize': 60,\n                'value': 1.0\n              },\n              {\n                'category': 4,\n                'id': 'o_custkey',\n                'name': 'o_custkey',\n                'symbolSize': 60,\n                'value': 0.06666400283575058\n              },\n              {\n                'category': 5,\n                'id': 'o_orderdate',\n                'name': 'o_orderdate',\n                'symbolSize': 20,\n                'value': 0.0016039999900385737\n              },\n              {\n                'category': 6,\n                'id': 'c_custkey',\n                'name': 'c_custkey',\n                'symbolSize': 60,\n                'value': 1.0\n              }],\n            links: [\n              {\n                'lineStyle': {\n                  'width': 6.04\n                },\n                'source': 'l_orderkey',\n                'target': 'o_orderkey',\n                'value': 604.0\n              },\n              {\n                'lineStyle': {\n                  'width': 20\n                },\n                'source': 'l_shipdate',\n                'target': 'o_orderdate',\n                'value': 365792.0\n              },\n              {\n                'lineStyle': {\n                  'width': 1.89\n                },\n                'source': 'o_custkey',\n                'target': 'c_custkey',\n                'value': 189.0\n              }],\n            categories: [\n              0,\n              1,\n              2,\n              3,\n              4,\n              5,\n              6\n            ],\n            center: ['50%', '50%'],\n            roam: true,\n            force: {\n              repulsion: 100\n            },\n            lineStyle: {\n              color: 'source',\n              curveness: 0.5\n            },\n            label: {\n              show: true,\n              color: 'auto',\n            },\n            itemStyle: {},\n            emphasis: {\n              focus: 'adjacency',\n              lineStyle: {\n                width: 10\n              }\n            }\n          }\n        ],\n        animationDuration: 1500,\n        animationEasingUpdate: 'quinticInOut'\n      },\n      checkedList: [],\n      distributions: [],\n      recommends: [\n        {\n          'column': 'l_orderkey,l_shipdate',\n          'partition_sql': 'ALTER TABLE lineitem set distributed by(l_orderkey,l_shipdate);',\n          'table': 'lineitem'\n        },\n        {\n          'column': 'o_orderkey,o_custkey,o_orderdate',\n          'partition_sql': 'ALTER TABLE orders set distributed by(o_orderkey,o_custkey,o_orderdate);',\n          'table': 'orders'\n        },\n        {\n          'column': 'c_custkey',\n          'partition_sql': 'ALTER TABLE customer set distributed by(c_custkey);',\n          'table': 'customer'\n        }\n      ],\n      beforeNode1Points: 32542,\n      beforeNode2Points: 32539,\n      afterNode1Points: 32553,\n      afterNode2Points: 32528,\n      beforePerformance: 2.5126,\n      afterPerformance: 2.5118,\n      hideStep1: true,\n      hideStep2: true,\n      hideStep3: true,\n      loading1: false,\n      loading2: false,\n      loading3: false\n    }\n  },\n  computed: {\n    canAction() {\n      return this.checkedList.length > 0\n    }\n  },\n  mounted() {\n    var theme = sessionStorage.getItem('theme-key') || 'light'\n    this.theme = theme\n    document.body.setAttribute('theme-mode', theme)\n    this.column2GraphOption.series[0].label.color = theme === 'dark' ? '#fff' : '#000'\n    this.getDataset()\n\n    this.pieOption.tooltip.formatter = function(param, ticket, callback) {\n      const result =\n          `${param.marker}Tabel:&nbsp${param.data['name']}</br>&nbsp&nbsp&nbspColumns:&nbsp${param.data['columns']}</br>&nbsp&nbsp&nbspSize:&nbsp${(param.data['value'])}MB</br>`\n      setTimeout(function() {\n        // 仅为了模拟异步回调\n        callback(ticket, result)\n      }, 100)\n      return 'loading...'\n    }\n\n    this.pieOption.series[0].label.formatter = function(data) {\n      let columns = String(data.data.columns).toUpperCase() \n      return data + '\\n' +data.data.columns + ' columns'\n    }\n  },\n  destroyed() {\n    if (this.explainSqlTypedObj) {\n      this.explainSqlTypedObj.destroy()\n    }\n    if (this.explainNodeTypedObj) {\n      this.explainNodeTypedObj.destroy()\n    }\n  },\n  methods: {\n    onThemeClick() {\n      var theme = sessionStorage.getItem('theme-key') === 'dark' ? 'light' : 'dark'\n      this.theme = theme\n      sessionStorage.setItem('theme-key', theme)\n      document.body.setAttribute('theme-mode', theme)\n      this.column2GraphOption.series[0].label.color = theme === 'dark' ? '#fff' : '#000'\n    },\n    onCheckBoxChange(index) {\n      if (this.checkedList.indexOf(index) > -1) {\n        this.checkedList.splice(this.checkedList.indexOf(index), 1)\n      } else {\n        this.checkedList.push(index)\n      }\n    },\n    getDataset() {\n      dataset().then(res => {\n        this.datasetOptions = res.data || []\n        if (this.datasetOptions.length > 0) {\n          this.dbSelect = this.datasetOptions[0].value\n        }\n      })\n    },\n    onLoadClcik() {\n      if (!this.dbSelect) {\n        this.$message.warning('Please select a dataset！')\n        return\n      }\n      this.getDistributions()\n    },\n    onPartitonClcik() {\n      this.getRecommend()\n    },\n    getDistributions() {\n      this.loading1 = true\n      distribution({ dataset: this.dbSelect }).then(res => {\n        const distributions = res.data.distributions || []\n        this.distributions = distributions.map(item => {\n          if (item.size.slice(-2).toLowerCase() === 'kb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' kb', '')) / 1024\n          } else if (item.size.slice(-2).toLowerCase() === 'mb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' mb', ''))\n          } else if (item.size.slice(-2).toLowerCase() === 'gb') {\n            item.size = parseFloat(item.size.toLowerCase().replace(' mb', '')) * 1024\n          }\n          return {\n            name: item.table_name,\n            value: item.size,\n            columns: item.columns\n          }\n        })\n        this.pieOption.series[0].data = this.distributions\n\n        const column2Graph = res.data.column2Graph || {}\n\n        this.column2GraphOption.series[0].data = column2Graph.nodes\n        this.column2GraphOption.series[0].links = column2Graph.links\n        this.column2GraphOption.series[0].categories = column2Graph.categories\n        this.hideStep1 = false\n      }).finally(() => {\n        this.loading1 = false\n      })\n    },\n    getRecommend() {\n      this.loading2 = true\n      recommend({ dataset: this.dbSelect }).then(res => {\n        this.recommends = res.data || []\n        this.hideStep2 = false\n      }).finally(() => {\n        this.loading2 = false\n      })\n    },\n    onActionClick() {\n      var recommend = this.recommends.filter((item, index) => {\n        return this.checkedList.indexOf(index) > -1\n      }) || []\n      var partitionKeys = {}\n      recommend.forEach(item => {\n        partitionKeys[item.table] = item.column\n      })\n      this.loading3 = true\n      preview({ partition_keys: partitionKeys }).then(res => {\n        this.hideStep3 = false\n        this.beforeNode1Points = res.data.distribution.before.node_0.points\n        this.beforeNode2Points = res.data.distribution.before.node_1.points\n        this.afterNode1Points = res.data.distribution.after.node_0.points\n        this.afterNode2Points = res.data.distribution.after.node_1.points\n        this.beforePerformance = res.data.performance.before\n        this.afterPerformance = res.data.performance.after\n      }).finally(() => {\n        this.loading3 = false\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n:root {\n  --body_background_color: white;\n  --textarea_inner_background: white;\n  --textarea_inner_color: #333333;\n  --dialog_background_color: #ffffff;\n  --dialog_color: #303133;\n  --select_background_color: #f5f5f5;\n  --sql_container_background_color: #f5f5f5;\n  --sql_container_color: #000000;\n  --text_color: #333333;\n  --text_grey: #666666;\n  --card_background_color: #ffffff;\n  --theme_icon_contnet: \"\\eaf8\";\n  --card_shadow_color: 0 2px 12px 0 rgb(0 0 0 / 10%);;\n}\n\n:root body[theme-mode=\"dark\"] {\n  --body_background_color: #1a2234;\n  --textarea_inner_background: #222f3e;\n  --textarea_inner_color: #FFFFFF;\n  --dialog_background_color: #1a2134;\n  --dialog_color: #FFFFFF;\n  --select_background_color: #222f3e;\n  --sql_container_background_color: #222f3e;\n  --sql_container_color: #ffffff;\n  --text_color: #ffffff;\n  --text_grey: #ffffff;\n  --card_background_color: #1d273c;\n  --theme_icon_contnet: \"\\eb7d\";\n  --card_shadow_color: 0 2px 12px 0 rgb(155 155 155 / 10%);\n}\n\nbody {\n  background-color: var(--body_background_color) !important;\n  transition: color 0.5s, background-color 0.5s;\n}\n\n.Mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  backdrop-filter: saturate(180%) blur(10px);\n  z-index: 101;\n  transition: all 0.3s linear;\n  -moz-transition: all 0.3s linear;\n  -webkit-transition: all 0.3s linear;\n}\n\n.orgchart-container {\n  width: 100% !important;\n  height: calc(70vh - 160px) !important;\n  margin: auto;\n}\n\n.orgchart > table:first-child {\n  margin: 40px auto 0 auto;\n}\n\n.el-form-item__label {\n  color: var(--text_color);\n}\n\n.el-upload__tip {\n  color: var(--text_grey);\n}\n\n.input .el-textarea__inner {\n  height: 100%;\n  background: var(--textarea_inner_background) !important;\n  color: var(--textarea_inner_color) !important;\n  transition: color 0.5s, background-color 0.5s;\n  font-size: 20px;\n}\n\n.el-textarea.is-disabled .el-textarea__inner {\n  background-color: #666666 !important;\n  color: lawngreen !important;\n}\n\n.report-container .el-dialog__body {\n  padding: 0 10px 10px 10px !important;\n}\n\n.el-dialog__header {\n  background-color: var(--body_background_color) !important;\n  transition: color 0.5s, background-color 0.5s;\n}\n\n.el-dialog__body {\n  background-color: var(--dialog_background_color) !important;\n  transition: color 0.5s, background-color 0.5s;\n}\n\n.el-dialog__title {\n  color: var(--dialog_color);\n}\n\n.report-container .el-dialog {\n  margin-bottom: 0 !important;\n}\n\n.el-loading-mask {\n  background-color: var(--dialog_background_color);\n}\n\n.el-tabs__header .el-tabs__item.is-active {\n  background-color: var(--body_background_color);\n  border: none;\n}\n\n.el-tabs__item {\n  background-color: var(--dialog_background_color);\n  color: var(--text_color);\n  border: none;\n}\n\n.el-tabs__nav-wrap::after {\n  display: none;\n}\n\n.el-tabs--border-card > .el-tabs__header {\n  background-color: var(--dialog_background_color);\n  border: none;\n}\n\n.el-dialog__close {\n  color: var(--dialog_color);\n  transition: color 0.5s, background-color 0.5s;\n}\n\n.el-card {\n  background: var(--dialog_background_color);\n  border-color: var(--dialog_background_color);\n  transition: color 0.5s, background-color 0.5s, border-color 0.5s;\n}\n\n.el-card.is-always-shadow {\n  box-shadow: var(--card_shadow_color);\n}\n\n.el-select {\n  background-color: var(--card_background_color);\n  width: calc(100% - 90px);\n  height: 38px;\n}\n\n.dbSelect .el-input__inner {\n  background-color: var(--select_background_color);\n  border: none;\n  color: #409EFF;\n  font-size: 16px;\n  padding-left: 5px;\n  height: 38px;\n}\n\n</style>\n\n<style scoped>\n\n/*最外层透明*/\n::v-deep .el-table,\n::v-deep .el-table__expanded-cell {\n  background-color: var(--sql_container_background_color) !important;\n}\n\n/* 表格内背景颜色 */\n::v-deep .el-table th,\n::v-deep .el-table tr,\n::v-deep .el-table td {\n  background-color: var(--sql_container_background_color) !important;\n  color: var(--text_color);\n}\n\n/*去除底边框*/\n::v-deep.el-table td.el-table__cell {\n  border: 1px solid var(--text_color);\n}\n\n::v-deep.el-table th.el-table__cell.is-leaf {\n  border: 1px solid var(--text_color);\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n.tab-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: left;\n}\n\n.tab-item {\n  display: flex;\n  flex-direction: row;\n  text-align: center;\n  color: var(--text_color);\n  padding: 0 10px;\n  cursor: pointer;\n}\n\n.tab-item-active {\n  color: #409EFF;\n}\n\n.suggest-item {\n  color: var(--text_color);\n  background: var(--sql_container_background_color);\n  width: calc(100% - 20px);\n  position: relative;\n  text-align: left;\n  margin: 10px 0;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 10px;\n  font-size: 16px;\n}\n\n.sql-container {\n  width: calc(100% - 20px);\n  background: var(--sql_container_background_color);\n  border-radius: 4px;\n  white-space: pre;\n  padding: 10px;\n  color: var(--sql_container_color);\n  font-size: 1em;\n  position: relative;\n  text-align: left;\n  height: calc(100% - 20px);\n  overflow-y: auto;\n  margin: 10px 0;\n  transition: color 0.5s, background-color 0.5s;\n}\n\n.copy-ontainer {\n  position: absolute;\n  right: 0;\n  top: 6px;\n  cursor: pointer;\n  color: #409EFF;\n}\n\n.el-icon-document-copy:hover {\n  color: #409EFF;\n}\n\n.el-icon-document-copy:active {\n  color: #000000;\n}\n\n.schemaTreeChart {\n  width: 100%;\n  height: 100%;\n}\n\n.customSchemaTreeChart {\n  width: 100%;\n  height: calc(100% - 80px);\n}\n\n</style>\n\n"],"sourceRoot":"src"},"metadata":{},"sourceType":"module"}